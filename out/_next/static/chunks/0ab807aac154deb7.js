(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,72329,e=>{"use strict";var a=e.i(43476),s=e.i(71645);function l(){let[e,l]=(0,s.useState)(""),[r,c]=(0,s.useState)([]),[t,i]=(0,s.useState)({}),[n,o]=(0,s.useState)([]),[h,d]=(0,s.useState)(null),[m,p]=(0,s.useState)(!0),[u,g]=(0,s.useState)("");(0,s.useEffect)(()=>{(async()=>{try{let[e,a]=await Promise.all([fetch("/data/company-labels.json"),fetch("/data/labels.json")]);if(!e.ok||!a.ok)throw Error("Failed to load data.");let s=await e.json(),l=await a.json();c(Array.isArray(s)?s:[]);let r={};if(Array.isArray(l))for(let e of l)e&&e.id&&(r[e.id]=e);i(r)}catch(e){console.error("[Search] Error loading JSON:",e),g("Could not load search data. Try refreshing the page.")}finally{p(!1)}})()},[]);let b=e=>{e&&(d(e),l(e.company||""),o([]))},y=[];return h&&Array.isArray(h.labels)&&(y=h.labels.map(e=>{let a=t[e];return a||{id:e,name:e,category:"Unknown",description:"No extra information available yet."}})),(0,a.jsx)("main",{id:"search",children:(0,a.jsxs)("div",{className:"search-inner",children:[(0,a.jsxs)("section",{className:"search-hero",children:[(0,a.jsx)("p",{className:"search-pill",children:"Search GoodBuys"}),(0,a.jsxs)("h1",{className:"search-title",children:["Find the ethics",(0,a.jsx)("br",{}),"behind any brand."]}),(0,a.jsx)("p",{className:"search-lede",children:"Type a company name to see which ecolabels are associated with it â€” and how rigorous those standards really are."}),(0,a.jsx)("form",{className:"search-form",onSubmit:a=>{a.preventDefault();let s=e.trim().toLowerCase();if(!s)return;let l=r.find(e=>e.company&&e.company.toLowerCase()===s);l?b(l):n.length>0&&b(n[0])},children:(0,a.jsxs)("div",{className:"search-input-shell",children:[(0,a.jsx)("label",{className:"search-label",htmlFor:"search-input",children:"Search for a company"}),(0,a.jsx)("span",{className:"search-input-icon","aria-hidden":"true",children:"ðŸ”"}),(0,a.jsx)("input",{id:"search-input",type:"text",autoComplete:"off",className:"search-input has-icon",value:e,onChange:e=>{let a,s=e.target.value;l(s),(a=s.trim().toLowerCase())&&Array.isArray(r)&&0!==r.length?o(r.filter(e=>e.company&&e.company.toLowerCase().includes(a)).sort((e,s)=>{let l=e.company.toLowerCase(),r=s.company.toLowerCase(),c=l.startsWith(a),t=r.startsWith(a);return c&&!t?-1:!c&&t?1:l.localeCompare(r)}).slice(0,5)):o([])},placeholder:m?"Loading dataset...":"e.g. Adidas, Amazon, Patagonia",disabled:m}),(0,a.jsxs)("button",{type:"submit",className:"search-submit","aria-label":"Search",children:[(0,a.jsx)("span",{className:"search-submit-label",children:"Search"}),(0,a.jsx)("span",{className:"search-submit-icon",children:"â†µ"})]})]})}),!m&&e.trim()&&n.length>0&&(0,a.jsx)("ul",{className:"search-suggestions","aria-label":"Search suggestions",children:n.map(e=>(0,a.jsx)("li",{className:"search-suggestion-item",children:(0,a.jsxs)("button",{type:"button",className:"search-suggestion-button",onClick:()=>b(e),children:[(0,a.jsx)("span",{className:"search-suggestion-company",children:e.company}),Array.isArray(e.labels)&&e.labels.length>0&&(0,a.jsxs)("span",{className:"search-suggestion-label-count",children:[e.labels.length," ecolabel",1===e.labels.length?"":"s"]})]})},e.company))}),!m&&e.trim()&&0===n.length&&!h&&(0,a.jsx)("p",{className:"search-no-results",children:"No matches yet. Try a shorter, simpler company name (e.g. â€œNikeâ€ instead of â€œNike Inc.â€)."}),u&&(0,a.jsx)("p",{className:"search-error",children:u})]}),(0,a.jsx)("section",{className:"search-results",children:h?(0,a.jsxs)("article",{className:"search-result-card",children:[(0,a.jsxs)("header",{className:"search-result-header",children:[(0,a.jsx)("p",{className:"search-company-kicker",children:"Company"}),(0,a.jsx)("h2",{className:"search-company-name",children:h.company}),(0,a.jsxs)("p",{className:"search-company-label-count",children:[0===y.length&&"No associated ecolabels found in this dataset.",1===y.length&&"1 associated ecolabel in this dataset.",y.length>1&&`${y.length} associated ecolabels in this dataset.`]})]}),y.length>0&&(0,a.jsx)("div",{className:"search-labels-grid",children:y.map(e=>{let s=e.image_name?`/images/ecolabels/${e.image_name}`:null,l="number"==typeof e.rigor_score?e.rigor_score:null,r="",c="";return null!==l&&(l>=8?(r="high",c="High rigor standard"):l>=6?(r="medium",c="Moderate rigor standard"):(r="low",c="Lower rigor standard")),(0,a.jsxs)("div",{className:"search-label-card",children:[s&&(0,a.jsx)("div",{className:"search-label-logo-wrap",children:(0,a.jsx)("img",{src:s,alt:e.name?`${e.name} logo`:"Ecolabel logo",className:"search-label-logo",loading:"lazy"})}),(0,a.jsxs)("div",{className:"search-label-body",children:[(0,a.jsxs)("div",{className:"search-label-header",children:[(0,a.jsx)("p",{className:"search-label-name",children:e.name}),e.category&&(0,a.jsx)("span",{className:"search-label-category",children:e.category})]}),e.description&&(0,a.jsx)("p",{className:"search-label-description",children:e.description}),null!==l&&(0,a.jsxs)("div",{className:`search-label-rigor-row ${r?`rigor-${r}`:""}`,children:[(0,a.jsx)("span",{className:"search-label-rigor-dot"}),(0,a.jsxs)("div",{className:"search-label-rigor-text",children:[(0,a.jsxs)("span",{className:"search-label-rigor-score",children:["Rigor ",l,(0,a.jsxs)("span",{className:"search-label-rigor-max",children:[" ","/ 10"]})]}),(0,a.jsx)("span",{className:"search-label-rigor-level",children:c})]})]})]})]},e.id)})})]}):(0,a.jsx)("div",{className:"search-placeholder",children:(0,a.jsx)("p",{children:"Type at least a few letters of a company name to preview matches. Select one to see its associated ecolabels, how strict each standard is, and where it focuses (labor, carbon, animal welfare, etc.)."})})})]})})}e.s(["default",()=>l])}]);